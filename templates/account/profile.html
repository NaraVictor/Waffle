{% extends '_base.html' %}
{% load static %}
{% load i18n %}

{% block css %}
<link href="{% static 'css/croppie.css' %}" rel="stylesheet" />
{% endblock css %}

{% block title %}
{{data.first_name}} {{data.last_name}}
{% endblock %}

{% block javascript %}
<script>
    // url variables
    var profile_url = "{% url 'profile' user.username %}";
    var dp_url = "{% url 'upload_profile_pic' %}";

</script>
<script src="{% static 'js/croppie.min.js' %}"></script>
<script src="{% static 'js/app/profile.js' %}"></script>
{% endblock %}


{% block content %}

<div class="my-5 row">

    <div class="col-md-3">

    </div>

    <div class="col-md-6">
        <form id="dpform" action="{% url 'upload_profile_pic' %}" enctype="multipart/form-data" method="POST">
            {% csrf_token %}
            <input type="file" name="profilepic" id="dpupload" class="d-none" hidden>
            <input type="submit" value="submit" id="dpsubmit" hidden>
        </form>

        <form method="POST" action="{% url 'profile' user.username %}" id="profile-form">
            {% csrf_token %}

            <div class="px-3 text-center">
                <img src="{{ user.profilepic_url}}" alt="{{ user.username }} Profile Picture" class="rounded-circle"
                    id="profilepic">
                <small class="form-text text-muted">click to update</small>
            </div>

            <div class="demo">
            </div>

            <div class="text-center pt-2">
                <div class="text-danger errorlist">
                </div>
                <p class="text-info info">{{ msg }}</p>
            </div>

            <div class="form-group my-4">
                <small class="form-text text-muted">Bio</small>
                <textarea id="bio" rows="3" name="bio" class="p-0 form-control" placeholder="bio"
                    autofocus>{{ data.bio }}</textarea>
            </div>

            <div class="form-row">
                <div class="form-group col-md-6">
                    <small id="first_name" class="form-text text-muted">First name</small>
                    <input class="form-control" maxlength="30" type="text" value="{{ data.first_name }}"
                        placeholder="first name" name="first_name" required>
                </div>
                <div class="form-group col-md-6">
                    <small class="form-text text-muted">Last name</small>
                    <input class="form-control" maxlength="240" value="{{ data.last_name }}" type="text"
                        placeholder="last name" name="last_name" required>
                </div>
                <div class="form-group col-md-6">
                    <small class="form-text text-muted">Birthdate</small>
                    <input class="form-control" type="date" value="{{ data.birthdate|date:'Y-m-d' }}"
                        placeholder="birthdate" name="birthdate" required>
                </div>
                <div class="form-group col-md-6">
                    <small class="form-text text-muted">Phone number</small>
                    <input type="tel" maxlength="15" name="phone_number" class="form-control"
                        value="{{ data.phone_number }}" id="phone_number" aria-describedby="phone_number"
                        placeholder="phone number" required>
                </div>
            </div>
            <div class="form-group">
                <small class="form-text text-muted">Email</small>
                <input type="email" maxlength="250" name="email" class="form-control" value="{{ data.email }}"
                    id="email" aria-describedby="emailHelp" placeholder="email" required>
            </div>

            <div class="form-group">
                <small class="form-text text-muted">Username</small>
                <input id="username" maxlength="140" name="username" placeholder="username" value="{{ data.username }}"
                    class="form-control" type="text" required>
            </div>
            <div class="status text-success"></div>
            <button type="submit" id="submitbtn" class="btn btn-primary">save</button>
            <a href="{% url 'account_change_password' %}" class="pl-2">change password</a>
        </form>

    </div>

    <div class="col-md-3"></div>

</div>

{% endblock content %}
